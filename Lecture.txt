Цифровые советчики на обогатительном переделе

Слайд «Цифровые советчики на обогатительном переделе»

Добрый день, меня зовут Виктор Мальцев. 
Я являюсь Data Science Lead компании Цифра. Одним из направлений деятельности нашей компании является разработка цифровых рекомендательных систем для операторов производственных установок.
Мы их называем цифровыми советчиками. 
Наша компания разработала и внедрила в промышленную эксплуатацию несколько цифровых советчиков для предприятий различных отраслей. 

Тема сегодняшнего занятия: 
Цифровые советчики на обогатительном переделе. 
В рамках занятия мы рассмотрим следующие темы:
	Структуру и функции цифрового советчика
	Выбор производственных показателей для анализа с целью внедрения цифрового советчика, рассмотрим примеры целевых производственных показателей
	Рассмотрим примеры факторного анализа
	Основы статистического анализа производственных показателей (выбросы, гистограммы, дерево решений и т. д.)
	Пример анализа производственного процесса
	Рассмотрим возможные экономические эффекты от внедрения цифрового советчика

Слайд «Архитектура цифрового советчика»

Что же такое цифровой советчик?

Основной задачей работы цифрового советчика является улучшение целевых производственных показателей (одного или нескольких взаимосвязанных) путем выдачи рекомендаций оператору на изменение управляющих параметров.

Целевые производственные показатели — это показатели для оценки работы конкретного передела. 
Они зависят от того какой именно технологический процесс мы рассматриваем.
Для дробления это может быть процентное содержание руды на выходе дробильного отделения с размером, например, более 16 мм. 
Для транспортировки горной массы в карьере – ходимость шин карьерных самосвалов или удельный расход топлива. 
Для флотации – процент извлечения целевого компонента (например, меди или золота). 

Внедрение цифровых советчиков является одним из эффективных способов улучшения этих целевых показателей производства.

В любом технологическом процессе имеются два вида параметров – наблюдаемые (которые можно измерить, но на значения, которых оператор не может оказать влияния) и управляющие – это параметры, на которые оператор может оказать воздействие.
Очевидно, что цифровой советчик дает рекомендации именно по изменению управляющих параметров для достижения наилучшего значения целевого показателя производства при соблюдении всех ограничений при работе производственных установок.

Основу работы цифрового советчика составляет математическая модель, созданная на основе изучения исторических данных с применением экспертных знаний особенностей и ограничений технологического процесса. 

Данная математическая модель подключается к онлайн данным работы оборудования (к системам АСУ ТП) и выполняет онлайн прогноз выбранного производственного показателя на заданный промежуток времени в будущее. 
Выбор промежутка времени для прогноза определяется на основе инерционности процесса и времени влияния изменения управляющих параметров на конечные результаты коим является целевой показатель производства. 
Например, для участка дробления, необходим прогноз на 30 минут, что достаточно для изменения скорости питателей с целью корректировки размера дробленной руды. 
Для участка флотации может быть необходим прогноз на несколько часов вперед.
Если прогноз по математической модели соответствует желаемым значениям целевого показателя производственного процесса, то цифровой советчик не пытается изменить состояние процесса. 
Если же прогнозируемые показатели не соответствуют целевым, то цифровой советчик подготавливает рекомендации по изменению управляющих параметров производственного процесса. 
Блок, генерирующий рекомендации оператору, содержит исторические данные по управлению производственным процессом за длительный период времени. Для каждого потенциального изменения управляющего параметра вычисляется прогноз значения целевого производственного показателя. В качестве итоговой рекомендации принимается рекомендация, которая позволит достичь оптимальное значение целевого показателя.
Важным компонентом цифрового советчика является блок бизнес-правил. 
Этот блок реализует ограничения на выдачу рекомендаций, они необходимы для соблюдения ограничений, которые присутствуют в любом технологическом процессе. 
К таким ограничениям относятся, например, ограничения по времени включения/отключения/повторного включения оборудования, наличия расходных материалов, допустимые временнЫе окна для вывода оборудования в ремонт и так далее.

Слайд «Высокоуровневая схема обогащения руды»

Теперь рассмотрим в качестве примера технологический процесс получения медного флотоконцентата.
Он состоит из дробления, измельчения, подачи измельченной руды на собственно флотацию и в конечном счете получения медного концентрата.
Если говорить о процессе получения медного флотоконцентрата, то в среде специалистов по производству довольно часто встречается мнение, что извлечение зависит только лишь от качества входящей руды (минералогический состав руды) и больше ни от чего, но на самом деле это не совсем так.
Очевидно, что минералогический состав руды — это наблюдаемый параметр и оператор повлиять на него не может.

Несмотря на то, что минералогический состав входящей руды безусловно является очень важным параметром, но также существуют и другие параметры, которыми может управлять оператор и которые значительно влияют на итоговое извлечение меди.

Например, оператор может управлять подачей воздуха, регулировать подачу реагентов, управлять интенсивностью перемешивания через регулирование частоты вращения двигателя перемешивающего устройства. 
Соответственно, эти параметры являются управляющими и их оператор может изменять и тем самым влиять на итоговое извлечение.

Собственно целью рассматриваемого цифрового советчика является увеличение извлечения полезного компонента (меди), путем выдачи своевременных рекомендаций оператору на изменение управляющих параметров. 

Слайд «Гистограмма извлечения меди».

Заказчиком были предоставлены данные по извлечению меди за несколько месяцев.
Обычно чем больше исторических данных, тем лучше.
Гистограмма извлечения имеет вид как показано на слайде.
По оси X показано извлечение, по оси Y количество значений, попавших в данный диапазон.
Гистограмма – это визуальное представление значений переменной. Весь диапазон значений переменной разбивается на диапазоны (бины) и на графике выводится количество значений, попавших в данный диапазон. Например, было около 15 измерений с извлечением около 82%.

Слайд «Гистограмма извлечения с кривой плотности нормального распределения»
По данному графику мы видим, что распределение значений извлечения похоже на кривую нормального закона распределения.
В данном случае параметры кривой нормального распределения: среднее = 82.4%, дисперсия = 2.2.
То, что гистограмма извлечения похожа на нормальное распределение это хорошо и говорит нам о том, что имеются большие шансы на улучшение показателя извлечения в результате применения цифрового советчика, так как это говорит о том, что (согласно центральной предельной теореме из теории вероятностей) на данный параметр оказывают влияние множество независимых друг от друга случайных величин. 

Слайд «Цель: увеличить среднее значение извлечения и сузить разброс».
Ключевое здесь это то, что эти параметры независимы друг от друга и управляя некоторыми из них более правильным образом можно несколько увеличить / сдвинуть вправо среднее значение извлечения и сузить разброс значений вокруг этого среднего, чего мы, собственно, и хотим добиться в результате следования рекомендациям, которые генерирует цифровой советчик.

Слайд «Диаграмма boxplot для извлечения»
Больше информации о данных по извлечению можно получить с помощью графика, называемого “boxplot”. Для данных по извлечению этот график имеет вид, показанный на слайде.

Значения первой квартили q1 на диаграмме говорит о том, что на предоставленной выборке данных с вероятностью 25% значение извлечения меньше или равно q1 (= 80.84%). 
Значения третьей квартили данных q3 говорит о том, что с вероятностью 75% значение извлечения меньше или равно q3 (= 84.08). 
Значения q1 и q3 можно рассматривать как «истинные» минимальное и максимальное значения, а абсолютные минимальное и максимальное значения скорее характеризуют аномальные выбросы.

Слайд «Гистограмма ксантогената»
Теперь проанализируем имеются ли управляющие параметры, которые существенно влияют на целевой производственный показатель (извлечение меди).
Одним из реагентов, применяемым для флотации является Ксантогенат. Он добавляется в пульпу и предназначен для применения в качестве реагента-собирателя (флокулянта). 
На слайде показано распределение количества ксантогената, добавляемого в реальном технологическом процессе:

Слайд «Извлечение при различных количествах ксантогената»
Влияние ксантогената на извлечение меди показано с помощью диаграммы «boxplot» 
Из этой диаграммы мы видим, что количество добавляемого ксантогената существенно влияет на итоговое извлечение.

Слайд «Гистограмма переработки руды (т/час)»
Следующим фактором, который, несомненно, влияет на извлечение является количество перерабатываемой руды в единицу времени. 
Гистограмма переработки руды на предоставленных данных имеет вид, показанный на слайде

Слайд «Извлечение при различной переработке»
Соответственно влияние объема переработки руды на извлечение меди можно увидеть на данной диаграмме.

Анализ количества ксантогената и объема переработки руды являются примерами однофакторного анализа влияния на целевую переменную (извлечение). 
Можно также провести и многофакторный анализ.
Однофакторный и многофакторный анализ являются важными составляющими реализуемости задачи создания эффективного цифрового советчика.

Слайд «Фрагмент дерева решений».
Важным инструментом в анализе данных является дерево решений. 
Дерево решений представляет собой иерархическую древовидную структуру, состоящую из правил вида «Если выполняются набор условий, то целевая переменная принимает определенное значение». 
На основании исторических данных правила генерируются автоматически в процессе обучения.
Правила генерируются за счет обобщения множества отдельных наблюдений (обучающих примеров), описывающих предметную область. Поэтому их называют индуктивными правилами, а сам процесс обучения — индукцией деревьев решений.
В обучающем множестве для примеров должно быть задано целевое значение, так как деревья решений — модели, создаваемые на основе обучения с учителем. 
В качестве исторических данных у нас есть таблица, в одном из столбцов которой содержится значение итогового извлечения, а в других – значениях технологических параметров, влияющих на извлечение. 
Фрагмент дерева решений имеет вид, представленный на слайде.

Если мы возьмем исторические данные по технологическим параметрам на определенный момент времени, соотнесем их с данными по извлечению меди, которое было получено, скажем, через 3ч и построим дерево решений на основании этих данных, то пользуясь этим деревом сможем с некоторой точностью предсказывать извлечение через 3 часа на основании текущих данных по технологическим параметрам производственного процесса.
Несмотря на то, что данная математическая модель обычно обладает достаточно низкой точностью, она имеет огромное преимущество, заключающееся в том, что дерево решений может быть проанализировано и понято человеком, например технологом. 
Как видим, дерево решений объясняет конкретные значения целевого показателя. Например, значения целевого показателя (извлечения) равные 80,29 или 79,91 получаются при условии, что значение параметра «Ксантогенат 301.2.5» <=30,0 и параметр «SP2A Концентрат основной флотации. Линия 1» <= 3,215 и т. д. 
Отметим, что для промежуточного значения извлечения 80,52 указана среднеквадратическая ошибка (mse), равная 0,377 и количество возможных значений извлечения равно 3.
К слову, если дерево решений имеет развитую структуру с большим значением ветвей и в листьях дерева перечисляются значения целевого параметра в широком диапазоне, то это дает косвенное подтверждение реализуемости цифрового советчика.

Далее, математическая модель цифрового советчика делает прогноз значения извлечения, скажем, на 3ч вперед. Если прогнозное значение удовлетворительное, то советчик ничего не делает.
Если же прогнозное извлечение слишком низкое, то советчик перебирает исторические данные определенным алгоритмом и ищет новые значения управляющих параметров, которые увеличивают прогнозное значение извлечения, но при этом являются допустимыми (удовлетворяют всем ограничениям производства).
Эти новые значения управляющих параметров и являются рекомендациями, которые предлагается применить оператору. 
Если затем оператор следует предложенным рекомендациям, то извлечение меди с высокой вероятностью будет увеличено.

Давайте попробуем дать оценку возможному экономическому эффекту от внедрения цифрового советчика в производственный процесс получения медного флотоконцентата.
Предположим, что при помощи реализации и внедрения цифрового советчика нам удалось повысить извлечение с 82.4% до, скажем, 83.9%, то есть достичь увеличения извлечения на 1.5%.
В этом случае примерный экономический эффект можно рассчитать следующим образом.
Предположим, что подача руды на ГОК-е составляет 1100 тонн в час и содержание меди в руде – 0,4%.
Тогда примерная оценка экономического эффекта составит около 66 кг дополнительной меди в час или около 1.5 тонн в сутки, что при цене 6 тыс долларов за тонну составит примерно 9 тысяч долларов в сутки или более 3 миллионов долларов ежегодно!

Итак, мы с вами разобрали основные понятия статистического анализа, используемые при создании цифровых советчиков, обсудили основные принципы, которые используются для генерации рекомендаций операторам производственных установок, обсудили вопросы реализуемости создания эффективных цифровых советчиков и расчета возможного экономического эффекта. 
Безусловно много вопросов остались за рамками данного курса. В первую очередь это вопросы сбора и очистки данных, сложности, связанные с внедрением цифровых советчиков и т. д.
Тем не менее, наш опыт говорит о том, что в большом количестве случаев создание эффективных советчиков для операторов производственных установок вполне реально и приносит значительный экономический эффект, так как, по сути, цифровой советчик анализирует и быстро учится на опыте лучших технологов и операторов, который содержится в исторических данных и выдает рекомендации, основанные на действиях лучших операторов в прошлом.
